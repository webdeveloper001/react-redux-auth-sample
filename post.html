<h2><a name="projectstructure"></a><br />React + Redux Project Structure</h2>

<p>
    All source code for the React + Redux tutorial app is located in the <code>/src</code> folder. In the src folder there
    is a folder per feature (App, HomePage, LoginPage, RegisterPage) and a bunch of folders for non-feature code that can
    be shared across different parts of the app (_actions, _components, _constants, _helpers, _reducers, _services).
</p>

<p>
    I prefixed non-feature folders with an underscore "_" to group them together so it's easy to quickly distinguish between
    features and non-features, and to keep the project folder structure shallow so it's quick to see everything at a glance
    and to navigate around the project,
</p>

<p>
    The index.js files in each folder are barrel files that group all the exported modules together so they can be imported using the folder
    path instead of the full module path and to enable importing multiple modules in a single import (e.g. <code>import { userActions, alertActions } from '../_actions'</code>).
</p>

<p>Click any of the below links to jump down to a description of each file along with it&#39;s code:</p>

<ul>
    <li>src
        <ul>
            <li><a href="#actions-folder">_actions</a>
                <ul>
                    <li><a href="#alert-actions-js">alert.actions.js</a></li>
                    <li>index.js</li>
                    <li><a href="#user-actions-js">user.actions.js</a></li>
                </ul>
            </li>
            <li><a href="#components-folder">_components</a>
                <ul>
                    <li>index.js</li>
                    <li><a href="#private-route-jsx">PrivateRoute.jsx</a></li>
                </ul>
            </li>
            <li><a href="#constants-folder">_constants</a>
                <ul>
                    <li><a href="#alert-constants-js">alert.constants.js</a></li>
                    <li>index.js</li>
                    <li><a href="#user-constants-js">user.constants.js</a></li>
                </ul>
            </li>
            <li><a href="#helpers-folder">_helpers</a>
                <ul>
                    <li><a href="#auth-header-js">auth-header.js</a></li>
                    <li><a href="#fake-backend-js">fake-backend.js</a></li>
                    <li><a href="#history-js">history.js</a></li>
                    <li>index.js</li>
                    <li><a href="#store-js">store.js</a></li>
                </ul>
            </li>
            <li>_reducers
                <ul>
                    <li><a href="#alert-reducer-js">alert.reducer.ts</a></li>
                    <li><a href="#authentication-reducer-js">authentication.reducer.js</a></li>
                    <li>index.js</li>
                    <li><a href="#registration-reducer-js">registration.reducer.js</a></li>
                    <li><a href="#users-reducer-js">users.reducer.js</a></li>
                </ul>
            </li>
            <li>_services
                <ul>
                    <li>index.js</li>
                    <li><a href="#user-service-js">user.service.js</a></li>
                </ul>
            </li>
            <li>App
                <ul>
                    <li><a href="#app-jsx">App.jsx</a></li>
                    <li>index.js</li>
                </ul>
            </li>
            <li>HomePage
                <ul>
                    <li><a href="#home-page-jsx">HomePage.jsx</a></li>
                    <li>index.js</li>
                </ul>
            </li>
            <li>LoginPage
                <ul>
                    <li>index.js</li>
                    <li><a href="#login-page-jsx">LoginPage.jsx</a></li>
                </ul>
            </li>
            <li>RegisterPage
                <ul>
                    <li>index.js</li>
                    <li><a href="#register-page-jsx">RegisterPage.jsx</a></li>
                </ul>
            </li>
            <li><a href="#index-html">index.html</a></li>
            <li><a href="#index-jsx">index.jsx</a></li>
        </ul>
    </li>
    <li>package.json</li>
    <li>webpack.config.js</li>
</ul>

<p>&nbsp;</p>

<div>&nbsp;<a name="actions-folder"></a></div>

<h2>Redux Actions Folder</h2>

<div><strong>Path: /src/_actions</strong></div>

<p>The _actions folder contains all the Redux action creators for the project, I've organised the action creators into different
    files by action type (e.g. user actions, alert actions etc).</p>

<p>If you're not familiar with Redux actions or action creators you can learn about them at <a href="http://redux.js.org/docs/basics/Actions.html" target="_blank" rel="nofollow">http://redux.js.org/docs/basics/Actions.html</a>.</p>

<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="alert-actions-js"></a></div>

<h2>Redux Alert Action Creators</h2>

<div><strong>Path: /src/_actions/alert.actions.js</strong></div>

<p>
    Contains Redux action creators for actions related to alerts / toaster notifications in the application. For example to display a success alert message with the text 'Registration Successful' 
    you can call <code>dispatch(alertActions.success('Registration successful'));</code>.
</p>
<p>
    I've wrapped the action methods in an <code>alertActions</code> object at the top of the file so it's easy to see all available actions at a glance and simplifies importing them into other files. 
    The implementation details for each action creator are placed in the below functions.
</p>

<pre class="brush: js;">import { alertConstants } from '../_constants';

export const alertActions = {
    success,
    error,
    clear
};

function success(message) {
    return { type: alertConstants.SUCCESS, message };
}

function error(message) {
    return { type: alertConstants.ERROR, message };
}

function clear() {
    return { type: alertConstants.CLEAR };
}</pre>

<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="user-actions-js"></a></div>

<h2>Redux User Action Creators</h2>

<div><strong>Path: /src/_actions/user.actions.js</strong></div>

<p>
    Contains Redux action creators for actions related to users. Public action creators are exposed via the <code>userActions</code> object at the top of the file and
    function implementations are located below, I like this structure because you can quickly see all of the actions that are available.
</p>
<p>
    Most of the actions for users are async actions that are made up of multiple sub actions, this is because they have to make an http request and wait for the 
    response before completing. Async actions typically dispatch a <code>request</code> action before performing an async task (e.g. an http request), and then 
    dispatch a <code>success</code> or <code>error</code> action based on the result of the async task.
</p>
<p>
    For example the <code>login()</code> action creator performs the following steps:
</p>
<ol>
    <li>dispatches a <code>LOGIN_REQUEST</code> action with <code>dispatch(request({ username }));</code></li>
    <li>calls the async task <code>userService.login(username, password)</code></li>
    <li>dispatches a <code>LOGIN_SUCCESS</code> with <code>dispatch(success(user));</code> if login was successful, or dispatches a <code>LOGIN_FAILURE</code> action with <code>dispatch(failure(error));</code> if login failed</li>
</ol>
<p>
    To keep the code tidy I've put sub action creators into nested functions within each async action creator function. For example the <code>login()</code> 
    function contains 3 nested action creator functions for <code>request()</code>, <code>success()</code> and <code>failure()</code> that return the actions 
    <code>LOGIN_REQUEST</code>, <code>LOGIN_SUCCESS</code> and <code>LOGIN_FAILURE</code> respectively. Putting the sub action creators into nested functions also allows me to
    give them standard names like request, success and failure without clashing with other function names because they only exist within the scope of the parent function.
</p>


<pre class="brush: js;">import { userConstants } from '../_constants';
import { userService } from '../_services';
import { alertActions } from './';
import { history } from '../_helpers';

export const userActions = {
    login,
    logout,
    register,
    getAll,
    delete: _delete
};

function login(username, password) {
    return dispatch =&gt; {
        dispatch(request({ username }));

        userService.login(username, password)
            .then(
                user =&gt; { 
                    dispatch(success(user));
                    history.push('/');
                },
                error =&gt; {
                    dispatch(failure(error));
                    dispatch(alertActions.error(error));
                }
            );
    };

    function request(user) { return { type: userConstants.LOGIN_REQUEST, user } }
    function success(user) { return { type: userConstants.LOGIN_SUCCESS, user } }
    function failure(error) { return { type: userConstants.LOGIN_FAILURE, error } }
}

function logout() {
    userService.logout();
    return { type: userConstants.LOGOUT };
}

function register(user) {
    return dispatch =&gt; {
        dispatch(request(user));

        userService.register(user)
            .then(
                user =&gt; { 
                    dispatch(success());
                    history.push('/login');
                    dispatch(alertActions.success('Registration successful'));
                },
                error =&gt; {
                    dispatch(failure(error));
                    dispatch(alertActions.error(error));
                }
            );
    };

    function request(user) { return { type: userConstants.REGISTER_REQUEST, user } }
    function success(user) { return { type: userConstants.REGISTER_SUCCESS, user } }
    function failure(error) { return { type: userConstants.REGISTER_FAILURE, error } }
}

function getAll() {
    return dispatch =&gt; {
        dispatch(request());

        userService.getAll()
            .then(
                users =&gt; dispatch(success(users)),
                error =&gt; { 
                    dispatch(failure(error));
                    dispatch(alertActions.error(error))
                }
            );
    };

    function request() { return { type: userConstants.GETALL_REQUEST } }
    function success(users) { return { type: userConstants.GETALL_SUCCESS, users } }
    function failure(error) { return { type: userConstants.GETALL_FAILURE, error } }
}

// prefixed function name with underscore because delete is a reserved word in javascript
function _delete(id) {
    return dispatch =&gt; {
        dispatch(request(id));

        userService.delete(id)
            .then(
                user =&gt; { 
                    dispatch(success(id));
                },
                error =&gt; {
                    dispatch(failure(id, error));
                }
            );
    };

    function request(id) { return { type: userConstants.DELETE_REQUEST, id } }
    function success(id) { return { type: userConstants.DELETE_SUCCESS, id } }
    function failure(id, error) { return { type: userConstants.DELETE_FAILURE, id, error } }
}</pre>

<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="components-folder"></a></div>

<h2>React Components Folder</h2>

<div><strong>Path: /src/_components</strong></div>

<p>The _components folder contains shared React components that can be used anywhere in the application.</p>

<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="private-route-jsx"></a></div>

<h2>React Private Route Component</h2>

<div><strong>Path: /src/_components/PrivateRoute.jsx</strong></div>

<p>
    The react private route component renders a route component if the user is logged in, otherwise it 
    redirects the user to the <code>/login</code> page.
</p>
<p>
    The way it checks if the user is logged in is by checking that there is a <code>user</code> object in 
    local storage. While it's possible to bypass this check by manually adding an object to local storage using
    browser dev tools, this would only give access to the client side component, it wouldn't 
    give access to any real secure data from the server api because a valid authentication token (JWT) is required for this.
</p>

<pre class="brush: js;">import React from 'react';
import { Route, Redirect } from 'react-router-dom';

export const PrivateRoute = ({ component: Component, ...rest }) =&gt; (
    &lt;Route {...rest} render={props =&gt; (
        localStorage.getItem('user')
            ? &lt;Component {...props} /&gt;
            : &lt;Redirect to={{ pathname: '/login', state: { from: props.location } }} /&gt;
    )} /&gt;
)</pre>

<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="constants-folder"></a></div>

<h2>Redux Action Constants Folder</h2>

<div><strong>Path: /src/_constants</strong></div>

<p>
    The _constants folder contains all of the redux action type constants used by redux action creators and reducers. It 
    could be used for any other constants in the project as well, it doesn't have to be only for redux action types.
</p>

<p>
    I decided to put redux action constants into their own files (rather than the same files as redux actions) to simplify
    my redux action files and keep them focused on one thing.
</p>

<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="alert-constants-js"></a></div>

<h2>Redux Alert Action Constants</h2>

<div><strong>Path: /src/_constants/alert.constants.js</strong></div>

<p>The alert constants object contains the redux alert action types used to display and clear alerts in the react application.</p>

<pre class="brush: js;">export const alertConstants = {
    SUCCESS: 'ALERT_SUCCESS',
    ERROR: 'ALERT_ERROR',
    CLEAR: 'ALERT_CLEAR'
};</pre>

<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="user-constants-js"></a></div>

<h2>Redux User Action Constants</h2>

<div><strong>Path: /src/_constants/user.constants.js</strong></div>

<p>
    The user constants object contains the redux user action types that can be dispatched in the react application, async
    actions that perform http requests involve a request followed by a success or error response, so each of these three steps
    is represented by a redux action.
</p>

<pre class="brush: js;">export const userConstants = {
    REGISTER_REQUEST: 'USERS_REGISTER_REQUEST',
    REGISTER_SUCCESS: 'USERS_REGISTER_SUCCESS',
    REGISTER_FAILURE: 'USERS_REGISTER_FAILURE',

    LOGIN_REQUEST: 'USERS_LOGIN_REQUEST',
    LOGIN_SUCCESS: 'USERS_LOGIN_SUCCESS',
    LOGIN_FAILURE: 'USERS_LOGIN_FAILURE',

    LOGOUT: 'USERS_LOGOUT',

    GETALL_REQUEST: 'USERS_GETALL_REQUEST',
    GETALL_SUCCESS: 'USERS_GETALL_SUCCESS',
    GETALL_FAILURE: 'USERS_GETALL_FAILURE',

    DELETE_REQUEST: 'USERS_DELETE_REQUEST',
    DELETE_SUCCESS: 'USERS_DELETE_SUCCESS',
    DELETE_FAILURE: 'USERS_DELETE_FAILURE'    
};</pre>

<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="helpers-folder"></a></div>

<h2>React + Redux Helpers Folder</h2>

<div><strong>Path: /src/_helpers</strong></div>

<p>
    The helpers folder contains all the bits and pieces that don't fit into other folders but don't
    justify having a folder of their own.
</p>

<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="auth-header-js"></a></div>
<h2>React Auth Header</h2>
<div><strong>Path: /src/_helpers/auth-header.js</strong></div>
<p></p>
<pre class="brush: js;">export function authHeader() {
    // return authorization header with jwt token
    let user = JSON.parse(localStorage.getItem('user'));

    if (user &amp;&amp; user.token) {
        return { 'Authorization': 'Bearer ' + user.token };
    } else {
        return {};
    }
}</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="fake-backend-js"></a></div>
<h2>React Fake / Mock Backend</h2>
<div><strong>Path: /src/_helpers/fake-backend.js</strong></div>
<p></p>
<pre class="brush: js;">// array in local storage for registered users
let users = JSON.parse(localStorage.getItem('users')) || [];
    
export function configureFakeBackend() {
    let realFetch = window.fetch;
    window.fetch = function (url, opts) {
        return new Promise((resolve, reject) =&gt; {
            // wrap in timeout to simulate server api call
            setTimeout(() =&gt; {

                // authenticate
                if (url.endsWith('/users/authenticate') &amp;&amp; opts.method === 'POST') {
                    // get parameters from post request
                    let params = JSON.parse(opts.body);

                    // find if any user matches login credentials
                    let filteredUsers = users.filter(user =&gt; {
                        return user.username === params.username &amp;&amp; user.password === params.password;
                    });

                    if (filteredUsers.length) {
                        // if login details are valid return user details and fake jwt token
                        let user = filteredUsers[0];
                        let responseJson = {
                            id: user.id,
                            username: user.username,
                            firstName: user.firstName,
                            lastName: user.lastName,
                            token: 'fake-jwt-token'
                        };
                        resolve({ ok: true, json: () =&gt; responseJson });
                    } else {
                        // else return error
                        reject('Username or password is incorrect');
                    }

                    return;
                }

                // get users
                if (url.endsWith('/users') &amp;&amp; opts.method === 'GET') {
                    // check for fake auth token in header and return users if valid, this security is implemented server side in a real application
                    if (opts.headers &amp;&amp; opts.headers.Authorization === 'Bearer fake-jwt-token') {
                        resolve({ ok: true, json: () =&gt; users });
                    } else {
                        // return 401 not authorised if token is null or invalid
                        reject('Unauthorised');
                    }

                    return;
                }

                // get user by id
                if (url.match(/\/users\/\d+$/) &amp;&amp; opts.method === 'GET') {
                    // check for fake auth token in header and return user if valid, this security is implemented server side in a real application
                    if (opts.headers &amp;&amp; opts.headers.Authorization === 'Bearer fake-jwt-token') {
                        // find user by id in users array
                        let urlParts = url.split('/');
                        let id = parseInt(urlParts[urlParts.length - 1]);
                        let matchedUsers = users.filter(user =&gt; { return user.id === id; });
                        let user = matchedUsers.length ? matchedUsers[0] : null;

                        // respond 200 OK with user
                        resolve({ ok: true, json: () =&gt; user});
                    } else {
                        // return 401 not authorised if token is null or invalid
                        reject('Unauthorised');
                    }

                    return;
                }

                // register user
                if (url.endsWith('/users/register') &amp;&amp; opts.method === 'POST') {
                    // get new user object from post body
                    let newUser = JSON.parse(opts.body);

                    // validation
                    let duplicateUser = users.filter(user =&gt; { return user.username === newUser.username; }).length;
                    if (duplicateUser) {
                        reject('Username "' + newUser.username + '" is already taken');
                        return;
                    }

                    // save new user
                    newUser.id = Math.max(...users.map(user =&gt; user.id)) + 1;
                    users.push(newUser);
                    localStorage.setItem('users', JSON.stringify(users));

                    // respond 200 OK
                    resolve({ ok: true, json: () =&gt; ({}) });

                    return;
                }

                // delete user
                if (url.match(/\/users\/\d+$/) &amp;&amp; opts.method === 'DELETE') {
                    // check for fake auth token in header and return user if valid, this security is implemented server side in a real application
                    if (opts.headers &amp;&amp; opts.headers.Authorization === 'Bearer fake-jwt-token') {
                        // find user by id in users array
                        let urlParts = url.split('/');
                        let id = parseInt(urlParts[urlParts.length - 1]);
                        for (let i = 0; i &lt; users.length; i++) {
                            let user = users[i];
                            if (user.id === id) {
                                // delete user
                                users.splice(i, 1);
                                localStorage.setItem('users', JSON.stringify(users));
                                break;
                            }
                        }

                        // respond 200 OK
                        resolve({ ok: true, json: () =&gt; ({}) });
                    } else {
                        // return 401 not authorised if token is null or invalid
                        reject('Unauthorised');
                    }

                    return;
                }

                // pass through any requests not handled above
                realFetch(url, opts).then(response =&gt; resolve(response));

            }, 500);
        });
    }
}</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="history-js"></a></div>
<h2>React Router History</h2>
<div><strong>Path: /src/_helpers/history.js</strong></div>
<p></p>
<pre class="brush: js;">import { createBrowserHistory } from 'history';

export const history = createBrowserHistory();</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="store-js"></a></div>
<h2>Redux Store</h2>
<div><strong>Path: /src/_helpers/store.js</strong></div>
<p></p>
<pre class="brush: js;">import { createStore, applyMiddleware } from 'redux';
import thunkMiddleware from 'redux-thunk';
import { createLogger } from 'redux-logger';
import rootReducer from '../_reducers';

const loggerMiddleware = createLogger();

export const store = createStore(
    rootReducer,
    applyMiddleware(
        thunkMiddleware,
        loggerMiddleware
    )
);</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="reducers-folder"></a></div>
<h2>Redux Reducers Folder</h2>
<div><strong>Path: /src/_reducers</strong></div>
<p></p>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="alert-reducer-js"></a></div>
<h2>Redux Alert Reducer</h2>
<div><strong>Path: /src/_reducers/alert.reducer.js</strong></div>
<p></p>
<pre class="brush: js;">import { alertConstants } from '../_constants';

export function alert(state = {}, action) {
  switch (action.type) {
    case alertConstants.SUCCESS:
      return {
        type: 'alert-success',
        message: action.message
      };
    case alertConstants.ERROR:
      return {
        type: 'alert-danger',
        message: action.message
      };
    case alertConstants.CLEAR:
      return {};
    default:
      return state
  }
}</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="authentication-reducer-js"></a></div>
<h2>Redux Authentication Reducer</h2>
<div><strong>Path: /src/_reducers/authentication.reducer.js</strong></div>
<p></p>
<pre class="brush: js;">import { userConstants } from '../_constants';

let user = JSON.parse(localStorage.getItem('user'));
const initialState = user ? { loggedIn: true, user } : {};

export function authentication(state = initialState, action) {
  switch (action.type) {
    case userConstants.LOGIN_REQUEST:
      return {
        loggingIn: true,
        user: action.user
      };
    case userConstants.LOGIN_SUCCESS:
      return {
        loggedIn: true,
        user: action.user
      };
    case userConstants.LOGIN_FAILURE:
      return {};
    case userConstants.LOGOUT:
      return {};
    default:
      return state
  }
}</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="registration-reducer-js"></a></div>
<h2>Redux Registration Reducer</h2>
<div><strong>Path: /src/_reducers/registration.reducer.js</strong></div>
<p></p>
<pre class="brush: js;">import { userConstants } from '../_constants';

export function registration(state = {}, action) {
  switch (action.type) {
    case userConstants.REGISTER_REQUEST:
      return {
        registering: true,
        user: action.user
      };
    case userConstants.REGISTER_SUCCESS:
      return {};
    case userConstants.REGISTER_FAILURE:
      return {};
    default:
      return state
  }
}</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="users-reducer-js"></a></div>
<h2>Redux Users Reducer</h2>
<div><strong>Path: /src/_reducers/users.reducer.js</strong></div>
<p></p>
<pre class="brush: js;">import { userConstants } from '../_constants';

export function users(state = {}, action) {
  switch (action.type) {
    case userConstants.GETALL_REQUEST:
      return {
        loading: true
      };
    case userConstants.GETALL_SUCCESS:
      return {
        items: action.users
      };
    case userConstants.GETALL_FAILURE:
      return { 
        error: action.error
      };
    case userConstants.DELETE_REQUEST:
      // add 'deleting:true' property to user being deleted
      return {
        ...state,
        items: state.items.map(user =&gt;
          user.id === action.id
            ? { ...user, deleting: true }
            : user
        )
      };
    case userConstants.DELETE_SUCCESS:
      // remove deleted user from state
      return {
        items: state.items.filter(user =&gt; user.id !== action.id)
      };
    case userConstants.DELETE_FAILURE:
      // remove 'deleting:true' property and add 'deleteError:[error]' property to user 
      return {
        ...state,
        items: state.items.map(user =&gt; {
          if (user.id === action.id) {
            // make copy of user without 'deleting:true' property
            const { deleting, ...userCopy } = user;
            // return copy of user with 'deleteError:[error]' property
            return { ...userCopy, deleteError: action.error };
          }

          return user;
        })
      };
    default:
      return state
  }
}</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="services-folder"></a></div>
<h2>React + Redux Services Folder</h2>
<div><strong>Path: /src/_services</strong></div>
<p></p>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="user-service-js"></a></div>
<h2>React + Redux User Service</h2>
<div><strong>Path: /src/_services/user.service.js</strong></div>
<p></p>
<pre class="brush: js;">import { authHeader } from '../_helpers';

export const userService = {
    login,
    logout,
    register,
    getAll,
    getById,
    update,
    delete: _delete
};

function login(username, password) {
    const requestOptions = {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
    };

    return fetch('/users/authenticate', requestOptions)
        .then(response =&gt; {
            if (!response.ok) { 
                return Promise.reject(response.statusText);
            }

            return response.json();
        })
        .then(user =&gt; {
            // login successful if there's a jwt token in the response
            if (user &amp;&amp; user.token) {
                // store user details and jwt token in local storage to keep user logged in between page refreshes
                localStorage.setItem('user', JSON.stringify(user));
            }

            return user;
        });
}

function logout() {
    // remove user from local storage to log user out
    localStorage.removeItem('user');
}

function getAll() {
    const requestOptions = {
        method: 'GET',
        headers: authHeader()
    };

    return fetch('/users', requestOptions).then(handleResponse);
}

function getById(id) {
    const requestOptions = {
        method: 'GET',
        headers: authHeader()
    };

    return fetch('/users/' + _id, requestOptions).then(handleResponse);
}

function register(user) {
    const requestOptions = {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(user)
    };

    return fetch('/users/register', requestOptions).then(handleResponse);
}

function update(user) {
    const requestOptions = {
        method: 'PUT',
        headers: { ...authHeader(), 'Content-Type': 'application/json' },
        body: JSON.stringify(user)
    };

    return fetch('/users/' + user.id, requestOptions).then(handleResponse);;
}

// prefixed function name with underscore because delete is a reserved word in javascript
function _delete(id) {
    const requestOptions = {
        method: 'DELETE',
        headers: authHeader()
    };

    return fetch('/users/' + id, requestOptions).then(handleResponse);;
}

function handleResponse(response) {
    if (!response.ok) { 
        return Promise.reject(response.statusText);
    }

    return response.json();
}</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="app-jsx"></a></div>
<h2>React + Redux App Component</h2>
<div><strong>Path: /src/App/App.jsx</strong></div>
<p></p>
<pre class="brush: js;">import React from 'react';
import { Router, Route } from 'react-router-dom';
import { connect } from 'react-redux';

import { history } from '../_helpers';
import { alertActions } from '../_actions';
import { PrivateRoute } from '../_components';
import { HomePage } from '../HomePage';
import { LoginPage } from '../LoginPage';
import { RegisterPage } from '../RegisterPage';

class App extends React.Component {
    constructor(props) {
        super(props);

        const { dispatch } = this.props;
        history.listen((location, action) =&gt; {
            // clear alert on location change
            dispatch(alertActions.clear());
        });
    }

    render() {
        const { alert } = this.props;
        return (
            &lt;div className="jumbotron"&gt;
                &lt;div className="container"&gt;
                    &lt;div className="col-sm-8 col-sm-offset-2"&gt;
                        {alert.message &amp;&amp;
                            &lt;div className={`alert ${alert.type}`}&gt;{alert.message}&lt;/div&gt;
                        }
                        &lt;Router history={history}&gt;
                            &lt;div&gt;
                                &lt;PrivateRoute exact path="/" component={HomePage} /&gt;
                                &lt;Route path="/login" component={LoginPage} /&gt;
                                &lt;Route path="/register" component={RegisterPage} /&gt;
                            &lt;/div&gt;
                        &lt;/Router&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        );
    }
}

function mapStateToProps(state) {
    const { alert } = state;
    return {
        alert
    };
}

const connectedApp = connect(mapStateToProps)(App);
export { connectedApp as App }; </pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="home-page-jsx"></a></div>
<h2>React + Redux Home Page Component</h2>
<div><strong>Path: /src/HomePage/HomePage.jsx</strong></div>
<p></p>
<pre class="brush: js;">import React from 'react';
import { Link } from 'react-router-dom';
import { connect } from 'react-redux';

import { userActions } from '../_actions';

class HomePage extends React.Component {
    componentDidMount() {
        this.props.dispatch(userActions.getAll());
    }

    handleDeleteUser(id) {
        return (e) =&gt; this.props.dispatch(userActions.delete(id));
    }

    render() {
        const { user, users } = this.props;
        return (
            &lt;div className="col-md-6 col-md-offset-3"&gt;
                &lt;h1&gt;Hi {user.firstName}!&lt;/h1&gt;
                &lt;p&gt;You're logged in with React!!&lt;/p&gt;
                &lt;h3&gt;All registered users:&lt;/h3&gt;
                {users.loading &amp;&amp; &lt;em&gt;Loading users...&lt;/em&gt;}
                {users.items &amp;&amp;
                    &lt;ul&gt;
                        {users.items.map((user, index) =&gt;
                            &lt;li key={user.id}&gt;
                                {user.firstName + ' ' + user.lastName}
                                {
                                    user.deleting ? &lt;em&gt; - Deleting...&lt;/em&gt;
                                    : user.deleteError ? &lt;span className="error"&gt; - ERROR: {user.deleteError}&lt;/span&gt;
                                    : &lt;span&gt; - &lt;a onClick={this.handleDeleteUser(user.id)}&gt;Delete&lt;/a&gt;&lt;/span&gt;
                                }
                            &lt;/li&gt;
                        )}
                    &lt;/ul&gt;
                }
                &lt;p&gt;
                    &lt;Link to="/login"&gt;Logout&lt;/Link&gt;
                &lt;/p&gt;
            &lt;/div&gt;
        );
    }
}

function mapStateToProps(state) {
    const { users, authentication } = state;
    const { user } = authentication;
    return {
        user,
        users
    };
}

const connectedHomePage = connect(mapStateToProps)(HomePage);
export { connectedHomePage as HomePage };</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="login-page-jsx"></a></div>
<h2>React + Redux Login Page Component</h2>
<div><strong>Path: /src/LoginPage/LoginPage.jsx</strong></div>
<p></p>
<pre class="brush: js;">import React from 'react';
import { Link } from 'react-router-dom';
import { connect } from 'react-redux';

import { userActions } from '../_actions';

class LoginPage extends React.Component {
    constructor(props) {
        super(props);

        // reset login status
        this.props.dispatch(userActions.logout());

        this.state = {
            username: '',
            password: '',
            submitted: false
        };

        this.handleChange = this.handleChange.bind(this);
        this.handleSubmit = this.handleSubmit.bind(this);
    }

    handleChange(e) {
        const { name, value } = e.target;
        this.setState({ [name]: value });
    }

    handleSubmit(e) {
        e.preventDefault();

        this.setState({ submitted: true });
        const { username, password } = this.state;
        const { dispatch } = this.props;
        if (username &amp;&amp; password) {
            dispatch(userActions.login(username, password));
        }
    }

    render() {
        const { loggingIn } = this.props;
        const { username, password, submitted } = this.state;
        return (
            &lt;div className="col-md-6 col-md-offset-3"&gt;
                &lt;h2&gt;Login&lt;/h2&gt;
                &lt;form name="form" onSubmit={this.handleSubmit}&gt;
                    &lt;div className={'form-group' + (submitted &amp;&amp; !username ? ' has-error' : '')}&gt;
                        &lt;label htmlFor="username"&gt;Username&lt;/label&gt;
                        &lt;input type="text" className="form-control" name="username" value={username} onChange={this.handleChange} /&gt;
                        {submitted &amp;&amp; !username &amp;&amp;
                            &lt;div className="help-block"&gt;Username is required&lt;/div&gt;
                        }
                    &lt;/div&gt;
                    &lt;div className={'form-group' + (submitted &amp;&amp; !password ? ' has-error' : '')}&gt;
                        &lt;label htmlFor="password"&gt;Password&lt;/label&gt;
                        &lt;input type="password" className="form-control" name="password" value={password} onChange={this.handleChange} /&gt;
                        {submitted &amp;&amp; !password &amp;&amp;
                            &lt;div className="help-block"&gt;Password is required&lt;/div&gt;
                        }
                    &lt;/div&gt;
                    &lt;div className="form-group"&gt;
                        &lt;button className="btn btn-primary"&gt;Login&lt;/button&gt;
                        {loggingIn &amp;&amp;
                            &lt;img src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" /&gt;
                        }
                        &lt;Link to="/register" className="btn btn-link"&gt;Register&lt;/Link&gt;
                    &lt;/div&gt;
                &lt;/form&gt;
            &lt;/div&gt;
        );
    }
}

function mapStateToProps(state) {
    const { loggingIn } = state.authentication;
    return {
        loggingIn
    };
}

const connectedLoginPage = connect(mapStateToProps)(LoginPage);
export { connectedLoginPage as LoginPage }; </pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="register-page-jsx"></a></div>
<h2>React + Redux Register Page Component</h2>
<div><strong>Path: /src/RegisterPage/RegisterPage.jsx</strong></div>
<p></p>
<pre class="brush: js;">import React from 'react';
import { Link } from 'react-router-dom';
import { connect } from 'react-redux';

import { userActions } from '../_actions';

class RegisterPage extends React.Component {
    constructor(props) {
        super(props);

        this.state = {
            user: {
                firstName: '',
                lastName: '',
                username: '',
                password: ''
            },
            submitted: false
        };

        this.handleChange = this.handleChange.bind(this);
        this.handleSubmit = this.handleSubmit.bind(this);
    }

    handleChange(event) {
        const { name, value } = event.target;
        const { user } = this.state;
        this.setState({
            user: {
                ...user,
                [name]: value
            }
        });
    }

    handleSubmit(event) {
        event.preventDefault();

        this.setState({ submitted: true });
        const { user } = this.state;
        const { dispatch } = this.props;
        if (user.firstName &amp;&amp; user.lastName &amp;&amp; user.username &amp;&amp; user.password) {
            dispatch(userActions.register(user));
        }
    }

    render() {
        const { registering  } = this.props;
        const { user, submitted } = this.state;
        return (
            &lt;div className="col-md-6 col-md-offset-3"&gt;
                &lt;h2&gt;Register&lt;/h2&gt;
                &lt;form name="form" onSubmit={this.handleSubmit}&gt;
                    &lt;div className={'form-group' + (submitted &amp;&amp; !user.firstName ? ' has-error' : '')}&gt;
                        &lt;label htmlFor="firstName"&gt;First Name&lt;/label&gt;
                        &lt;input type="text" className="form-control" name="firstName" value={user.firstName} onChange={this.handleChange} /&gt;
                        {submitted &amp;&amp; !user.firstName &amp;&amp;
                            &lt;div className="help-block"&gt;First Name is required&lt;/div&gt;
                        }
                    &lt;/div&gt;
                    &lt;div className={'form-group' + (submitted &amp;&amp; !user.lastName ? ' has-error' : '')}&gt;
                        &lt;label htmlFor="lastName"&gt;Last Name&lt;/label&gt;
                        &lt;input type="text" className="form-control" name="lastName" value={user.lastName} onChange={this.handleChange} /&gt;
                        {submitted &amp;&amp; !user.lastName &amp;&amp;
                            &lt;div className="help-block"&gt;Last Name is required&lt;/div&gt;
                        }
                    &lt;/div&gt;
                    &lt;div className={'form-group' + (submitted &amp;&amp; !user.username ? ' has-error' : '')}&gt;
                        &lt;label htmlFor="username"&gt;Username&lt;/label&gt;
                        &lt;input type="text" className="form-control" name="username" value={user.username} onChange={this.handleChange} /&gt;
                        {submitted &amp;&amp; !user.username &amp;&amp;
                            &lt;div className="help-block"&gt;Username is required&lt;/div&gt;
                        }
                    &lt;/div&gt;
                    &lt;div className={'form-group' + (submitted &amp;&amp; !user.password ? ' has-error' : '')}&gt;
                        &lt;label htmlFor="password"&gt;Password&lt;/label&gt;
                        &lt;input type="password" className="form-control" name="password" value={user.password} onChange={this.handleChange} /&gt;
                        {submitted &amp;&amp; !user.password &amp;&amp;
                            &lt;div className="help-block"&gt;Password is required&lt;/div&gt;
                        }
                    &lt;/div&gt;
                    &lt;div className="form-group"&gt;
                        &lt;button className="btn btn-primary"&gt;Register&lt;/button&gt;
                        {registering &amp;&amp; 
                            &lt;img src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" /&gt;
                        }
                        &lt;Link to="/login" className="btn btn-link"&gt;Cancel&lt;/Link&gt;
                    &lt;/div&gt;
                &lt;/form&gt;
            &lt;/div&gt;
        );
    }
}

function mapStateToProps(state) {
    const { registering } = state.registration;
    return {
        registering
    };
}

const connectedRegisterPage = connect(mapStateToProps)(RegisterPage);
export { connectedRegisterPage as RegisterPage };</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="index-html"></a></div>
<h2>Base Index HTML File</h2>
<div><strong>Path: /src/index.html</strong></div>
<p></p>
<pre class="brush: xml;">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;React + Redux - User Registration and Login Example &amp; Tutorial&lt;/title&gt;
    &lt;link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /&gt;
    &lt;style&gt;
        a { cursor: pointer; }
        .help-block { font-size: 12px; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id="app"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<div><a href="#projectstructure">Back to top</a></div>

<div>&nbsp;<a name="index-jsx"></a></div>
<h2>Main React Entry File</h2>
<div><strong>Path: /src/index.jsx</strong></div>
<p></p>
<pre class="brush: js;">import React from 'react';
import { render } from 'react-dom';
import { Provider } from 'react-redux';

import { store } from './_helpers';
import { App } from './App';

// setup fake backend
import { configureFakeBackend } from './_helpers';
configureFakeBackend();

render(
    &lt;Provider store={store}&gt;
        &lt;App /&gt;
    &lt;/Provider&gt;,
    document.getElementById('app')
);</pre>
<div><a href="#projectstructure">Back to top</a></div>

<p>&nbsp;</p>
<h2>Web Development Sydney</h2>
<p>Feel free to <a href="/contact">drop me a line</a> if you&#39;re looking for a MEAN Stack developer web developer&nbsp;in
    Sydney Australia, I also provide remote contracting services for clients outside Sydney.</p>